module.exports=[89531,a=>{"use strict";var b=a.i(87924),c=a.i(60721),d=a.i(50944),e=a.i(72131);function f({children:a,requiredRole:f}){let{user:g,isLoading:h,hasRole:i}=(0,c.useAuth)(),j=(0,d.useRouter)();return((0,e.useEffect)(()=>{if(!h){if(!g)return void j.push("/auth");if(f&&!i(f))return void j.push("/")}},[g,h,f,i,j]),h)?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):g?f&&!i(f)?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Denied"}),(0,b.jsx)("p",{className:"text-gray-600",children:"You don't have permission to access this page."})]})}):(0,b.jsx)(b.Fragment,{children:a}):null}a.s(["ProtectedRoute",()=>f])},92258,a=>{"use strict";let b=(0,a.i(70106).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);a.s(["Mail",()=>b],92258)},78880,a=>{"use strict";var b=a.i(87924),c=a.i(60721),d=a.i(89531),e=a.i(46842),f=a.i(92258),g=a.i(20005),h=a.i(72131),i=a.i(50944);function j(){let{user:a,logout:j}=(0,c.useAuth)(),k=(0,i.useRouter)(),[l,m]=(0,h.useState)(!1),[n,o]=(0,h.useState)({name:"",email:"",currentPassword:"",newPassword:"",confirmPassword:""}),[p,q]=(0,h.useState)(""),[r,s]=(0,h.useState)(""),t=a=>{let{name:b,value:c}=a.target;o(a=>({...a,[b]:c})),q("")};return(0,h.useEffect)(()=>{a&&o(b=>({...b,name:a.name||"",email:a.email||""}))},[a]),(0,b.jsx)(d.ProtectedRoute,{requiredRole:"consumer",children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Your Profile"}),p&&(0,b.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm",children:p}),r&&(0,b.jsx)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg text-green-800 text-sm",children:r}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6 mb-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Account Information"}),l?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,b.jsx)("input",{type:"text",name:"name",value:n.name,onChange:t,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,b.jsx)("input",{type:"email",name:"email",value:n.email,onChange:t,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:()=>{if(!n.name||!n.email)return void q("Name and email are required");if(!/^\S+@\S+\.\S+$/.test(n.email))return void q("Please enter a valid email address");try{let b=JSON.parse(localStorage.getItem("allUsers")||"[]").map(b=>b.id===a?.id?{...b,name:n.name,email:n.email}:b);localStorage.setItem("allUsers",JSON.stringify(b));let c={...a,name:n.name,email:n.email};localStorage.setItem("user",JSON.stringify(c)),s("Profile updated successfully"),m(!1),setTimeout(()=>s(""),3e3)}catch(a){q("Failed to update profile. Please try again.")}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium text-sm",children:"Save Changes"}),(0,b.jsx)("button",{onClick:()=>{m(!1),o(b=>({...b,name:a?.name||"",email:a?.email||""}))},className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium text-sm",children:"Cancel"})]})]}):(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4 p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)(e.User,{size:20,className:"text-gray-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Name"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:a?.name})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)(f.Mail,{size:20,className:"text-gray-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Email"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:a?.email})]})]}),(0,b.jsx)("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium text-sm",children:"Edit Profile"})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6 mb-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Change Password"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),(0,b.jsx)("input",{type:"password",name:"currentPassword",value:n.currentPassword,onChange:t,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,b.jsx)("input",{type:"password",name:"newPassword",value:n.newPassword,onChange:t,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),(0,b.jsx)("input",{type:"password",name:"confirmPassword",value:n.confirmPassword,onChange:t,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,b.jsx)("button",{onClick:()=>{if(q(""),!n.currentPassword||!n.newPassword||!n.confirmPassword)return void q("All password fields are required");if(n.newPassword!==n.confirmPassword)return void q("New passwords do not match");if(n.newPassword.length<4)return void q("Password must be at least 4 characters");try{let b=JSON.parse(localStorage.getItem("allUsers")||"[]"),c=b.find(b=>b.id===a?.id);if(!c)return void q("User not found");if(c.password!==n.currentPassword)return void q("Current password is incorrect");let d=b.map(b=>b.id===a?.id?{...b,password:n.newPassword}:b);localStorage.setItem("allUsers",JSON.stringify(d)),s("Password changed successfully"),o(a=>({...a,currentPassword:"",newPassword:"",confirmPassword:""})),setTimeout(()=>s(""),3e3)}catch(a){q("Failed to change password. Please try again.")}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium text-sm",children:"Update Password"})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Session"}),(0,b.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Sign out from your account"}),(0,b.jsxs)("button",{onClick:()=>{j(),k.push("/auth")},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium text-sm flex items-center gap-2",children:[(0,b.jsx)(g.LogOut,{size:16}),"Logout"]})]})]})})}a.s(["default",()=>j])}];

//# sourceMappingURL=_c1b3e14c._.js.map