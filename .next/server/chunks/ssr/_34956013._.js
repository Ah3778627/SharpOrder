module.exports=[89531,a=>{"use strict";var b=a.i(87924),c=a.i(60721),d=a.i(50944),e=a.i(72131);function f({children:a,requiredRole:f}){let{user:g,isLoading:h,hasRole:i}=(0,c.useAuth)(),j=(0,d.useRouter)();return((0,e.useEffect)(()=>{if(!h){if(!g)return void j.push("/auth");if(f&&!i(f))return void j.push("/")}},[g,h,f,i,j]),h)?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):g?f&&!i(f)?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Denied"}),(0,b.jsx)("p",{className:"text-gray-600",children:"You don't have permission to access this page."})]})}):(0,b.jsx)(b.Fragment,{children:a}):null}a.s(["ProtectedRoute",()=>f])},62573,a=>{"use strict";let b="sharporder_db";function c(){let a=localStorage.getItem(b);return a?JSON.parse(a):{orders:{},stores:{},blockedConsumers:[]}}function d(a){localStorage.setItem(b,JSON.stringify(a))}let e={create:a=>{let b=c(),e={...a,id:`order_${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return b.orders[e.id]=e,d(b),e},getById:a=>c().orders[a]||null,getByConsumer:a=>Object.values(c().orders).filter(b=>b.consumerId===a),getByStore:a=>Object.values(c().orders).filter(b=>b.storeId===a),getAll:()=>Object.values(c().orders),update:(a,b)=>{let e=c(),f=e.orders[a];if(!f)throw Error("Order not found");let g={...f,...b,updatedAt:new Date().toISOString()};return e.orders[a]=g,d(e),g},delete:a=>{let b=c();delete b.orders[a],d(b)}},f={create:a=>{let b=c(),e={...a,id:`store_${Date.now()}`,createdAt:new Date().toISOString()};return b.stores[e.id]=e,d(b),e},getById:a=>c().stores[a]||null,getByAdmin:a=>Object.values(c().stores).find(b=>b.adminId===a)||null,getAll:()=>Object.values(c().stores),update:(a,b)=>{let e=c(),f=e.stores[a];if(!f)throw Error("Store not found");let g={...f,...b};return e.stores[a]=g,d(e),g},delete:a=>{let b=c();delete b.stores[a],d(b)}},g={add:a=>{let b=c();b.blockedConsumers.includes(a)||(b.blockedConsumers.push(a),d(b))},remove:a=>{let b=c();b.blockedConsumers=b.blockedConsumers.filter(b=>b!==a),d(b)},isBlocked:a=>c().blockedConsumers.includes(a),getAll:()=>c().blockedConsumers};a.s(["AnalyticsDB",0,{getStoreAnalytics:a=>{let b=e.getByStore(a),c=b.reduce((a,b)=>a+(b.totalPrice-b.discount),0);return{totalOrders:b.length,totalRevenue:c,averageOrderValue:b.length>0?c/b.length:0,recentOrders:b.slice(-10)}},getSystemAnalytics:()=>{let a=e.getAll(),b=f.getAll(),c=g.getAll().length,d=a.reduce((a,b)=>a+(b.totalPrice-b.discount),0),h=new Set(a.map(a=>a.consumerId)).size;return{totalOrders:a.length,totalRevenue:d,averageOrderValue:a.length>0?d/a.length:0,recentOrders:a.slice(-20),totalStores:b.length,totalConsumers:h,totalBlocked:c}}},"BlockedConsumerDB",0,g,"OrderDB",0,e,"StoreDB",0,f])},83497,a=>{"use strict";let b=(0,a.i(70106).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);a.s(["Package",()=>b],83497)},32082,a=>{"use strict";var b=a.i(87924),c=a.i(60721),d=a.i(62573),e=a.i(89531),f=a.i(83497),g=a.i(72131);function h(){let{user:a}=(0,c.useAuth)(),[h,i]=(0,g.useState)([]),[j,k]=(0,g.useState)(!0),[l,m]=(0,g.useState)("all"),[n,o]=(0,g.useState)(null);(0,g.useEffect)(()=>{a&&a.storeId&&(i(d.OrderDB.getByStore(a.storeId)),k(!1))},[a]);let p="all"===l?h:h.filter(a=>a.status===l);return(0,b.jsx)(e.ProtectedRoute,{requiredRole:"admin",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Order Management"}),(0,b.jsx)("div",{className:"flex gap-2 mb-8 flex-wrap",children:["all","pending","processing","shipped","delivered","cancelled"].map(a=>(0,b.jsx)("button",{onClick:()=>m(a),className:`px-4 py-2 rounded-lg font-medium transition ${l===a?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"all"===a?"All Orders":a.charAt(0).toUpperCase()+a.slice(1)},a))}),j?(0,b.jsx)("div",{className:"text-center py-12",children:"Loading orders..."}):0===p.length?(0,b.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[(0,b.jsx)(f.Package,{size:48,className:"mx-auto text-gray-300 mb-4"}),(0,b.jsxs)("p",{className:"text-gray-600",children:['No orders found with status "',l,'"']})]}):(0,b.jsx)("div",{className:"space-y-4",children:p.map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Order ID"}),(0,b.jsx)("p",{className:"font-mono font-semibold text-gray-900",children:a.id})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Total Price"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",a.totalPrice.toFixed(2)]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 py-4 border-t border-b border-gray-200 mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Customer ID"}),(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:a.consumerId.substring(0,8)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Items"}),(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:a.items.length})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Discount"}),(0,b.jsxs)("p",{className:"text-sm font-semibold text-green-600",children:["-$",a.discount.toFixed(2)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Order Date"}),(0,b.jsx)("p",{className:"text-sm text-gray-900",children:new Date(a.createdAt).toLocaleDateString()})]})]}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-2",children:"Update Status"}),(0,b.jsxs)("select",{value:a.status,onChange:b=>{var c,e;let f,g;return c=a.id,e=b.target.value,i(f=h.map(a=>a.id===c?{...a,status:e}:a)),void((g=f.find(a=>a.id===c))&&d.OrderDB.update(c,g))},className:`px-3 py-2 rounded-lg border font-medium focus:ring-2 focus:ring-blue-500 outline-none ${"delivered"===a.status?"bg-green-100 text-green-800 border-green-300":"shipped"===a.status?"bg-blue-100 text-blue-800 border-blue-300":"cancelled"===a.status?"bg-red-100 text-red-800 border-red-300":"bg-yellow-100 text-yellow-800 border-yellow-300"}`,children:[(0,b.jsx)("option",{value:"pending",children:"Pending"}),(0,b.jsx)("option",{value:"processing",children:"Processing"}),(0,b.jsx)("option",{value:"shipped",children:"Shipped"}),(0,b.jsx)("option",{value:"delivered",children:"Delivered"}),(0,b.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,b.jsx)("button",{onClick:()=>o(n===a.id?null:a.id),className:"text-blue-600 hover:text-blue-700 font-semibold text-sm md:mt-6",children:n===a.id?"Hide Items":"View Items"})]})]}),n===a.id&&(0,b.jsxs)("div",{className:"bg-gray-50 border-t border-gray-200 p-6",children:[(0,b.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Order Items"}),(0,b.jsx)("div",{className:"space-y-3",children:a.items.map((a,c)=>(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:a.name}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Quantity: ",a.quantity]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"font-semibold text-gray-900",children:["$",(a.price*a.quantity).toFixed(2)]}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["$",a.price.toFixed(2)," each"]})]})]},c))}),a.coupon&&(0,b.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Coupon Applied: ",(0,b.jsx)("span",{className:"font-semibold text-blue-600",children:a.coupon})]})})]})]},a.id))})]})})}a.s(["default",()=>h])}];

//# sourceMappingURL=_34956013._.js.map