(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,11870,e=>{"use strict";var t=e.i(43476),s=e.i(94690),r=e.i(18566),l=e.i(71645);function d({children:e,requiredRole:d}){let{user:a,isLoading:i,hasRole:n}=(0,s.useAuth)(),c=(0,r.useRouter)();return((0,l.useEffect)(()=>{if(!i){if(!a)return void c.push("/auth");if(d&&!n(d))return void c.push("/")}},[a,i,d,n,c]),i)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):a?d&&!n(d)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Denied"}),(0,t.jsx)("p",{className:"text-gray-600",children:"You don't have permission to access this page."})]})}):(0,t.jsx)(t.Fragment,{children:e}):null}e.s(["ProtectedRoute",()=>d])},98480,e=>{"use strict";let t="sharporder_db";function s(){let e=localStorage.getItem(t);return e?JSON.parse(e):{orders:{},stores:{},blockedConsumers:[]}}function r(e){localStorage.setItem(t,JSON.stringify(e))}let l={create:e=>{let t=s(),l={...e,id:`order_${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return t.orders[l.id]=l,r(t),l},getById:e=>s().orders[e]||null,getByConsumer:e=>Object.values(s().orders).filter(t=>t.consumerId===e),getByStore:e=>Object.values(s().orders).filter(t=>t.storeId===e),getAll:()=>Object.values(s().orders),update:(e,t)=>{let l=s(),d=l.orders[e];if(!d)throw Error("Order not found");let a={...d,...t,updatedAt:new Date().toISOString()};return l.orders[e]=a,r(l),a},delete:e=>{let t=s();delete t.orders[e],r(t)}},d={create:e=>{let t=s(),l={...e,id:`store_${Date.now()}`,createdAt:new Date().toISOString()};return t.stores[l.id]=l,r(t),l},getById:e=>s().stores[e]||null,getByAdmin:e=>Object.values(s().stores).find(t=>t.adminId===e)||null,getAll:()=>Object.values(s().stores),update:(e,t)=>{let l=s(),d=l.stores[e];if(!d)throw Error("Store not found");let a={...d,...t};return l.stores[e]=a,r(l),a},delete:e=>{let t=s();delete t.stores[e],r(t)}},a={add:e=>{let t=s();t.blockedConsumers.includes(e)||(t.blockedConsumers.push(e),r(t))},remove:e=>{let t=s();t.blockedConsumers=t.blockedConsumers.filter(t=>t!==e),r(t)},isBlocked:e=>s().blockedConsumers.includes(e),getAll:()=>s().blockedConsumers};e.s(["AnalyticsDB",0,{getStoreAnalytics:e=>{let t=l.getByStore(e),s=t.reduce((e,t)=>e+(t.totalPrice-t.discount),0);return{totalOrders:t.length,totalRevenue:s,averageOrderValue:t.length>0?s/t.length:0,recentOrders:t.slice(-10)}},getSystemAnalytics:()=>{let e=l.getAll(),t=d.getAll(),s=a.getAll().length,r=e.reduce((e,t)=>e+(t.totalPrice-t.discount),0),i=new Set(e.map(e=>e.consumerId)).size;return{totalOrders:e.length,totalRevenue:r,averageOrderValue:e.length>0?r/e.length:0,recentOrders:e.slice(-20),totalStores:t.length,totalConsumers:i,totalBlocked:s}}},"BlockedConsumerDB",0,a,"OrderDB",0,l,"StoreDB",0,d])},88844,e=>{"use strict";let t=(0,e.i(75254).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>t],88844)},63116,e=>{"use strict";var t=e.i(43476),s=e.i(94690),r=e.i(98480),l=e.i(11870),d=e.i(88844),a=e.i(71645);function i(){let{user:e}=(0,s.useAuth)(),[i,n]=(0,a.useState)([]),[c,o]=(0,a.useState)(!0),[m,x]=(0,a.useState)("all"),[u,g]=(0,a.useState)(null);(0,a.useEffect)(()=>{e&&e.storeId&&(n(r.OrderDB.getByStore(e.storeId)),o(!1))},[e]);let h="all"===m?i:i.filter(e=>e.status===m);return(0,t.jsx)(l.ProtectedRoute,{requiredRole:"admin",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Order Management"}),(0,t.jsx)("div",{className:"flex gap-2 mb-8 flex-wrap",children:["all","pending","processing","shipped","delivered","cancelled"].map(e=>(0,t.jsx)("button",{onClick:()=>x(e),className:`px-4 py-2 rounded-lg font-medium transition ${m===e?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"all"===e?"All Orders":e.charAt(0).toUpperCase()+e.slice(1)},e))}),c?(0,t.jsx)("div",{className:"text-center py-12",children:"Loading orders..."}):0===h.length?(0,t.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[(0,t.jsx)(d.Package,{size:48,className:"mx-auto text-gray-300 mb-4"}),(0,t.jsxs)("p",{className:"text-gray-600",children:['No orders found with status "',m,'"']})]}):(0,t.jsx)("div",{className:"space-y-4",children:h.map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Order ID"}),(0,t.jsx)("p",{className:"font-mono font-semibold text-gray-900",children:e.id})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Total Price"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",e.totalPrice.toFixed(2)]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 py-4 border-t border-b border-gray-200 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Customer ID"}),(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:e.consumerId.substring(0,8)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Items"}),(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:e.items.length})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Discount"}),(0,t.jsxs)("p",{className:"text-sm font-semibold text-green-600",children:["-$",e.discount.toFixed(2)]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Order Date"}),(0,t.jsx)("p",{className:"text-sm text-gray-900",children:new Date(e.createdAt).toLocaleDateString()})]})]}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-2",children:"Update Status"}),(0,t.jsxs)("select",{value:e.status,onChange:t=>{var s,l;let d,a;return s=e.id,l=t.target.value,n(d=i.map(e=>e.id===s?{...e,status:l}:e)),void((a=d.find(e=>e.id===s))&&r.OrderDB.update(s,a))},className:`px-3 py-2 rounded-lg border font-medium focus:ring-2 focus:ring-blue-500 outline-none ${"delivered"===e.status?"bg-green-100 text-green-800 border-green-300":"shipped"===e.status?"bg-blue-100 text-blue-800 border-blue-300":"cancelled"===e.status?"bg-red-100 text-red-800 border-red-300":"bg-yellow-100 text-yellow-800 border-yellow-300"}`,children:[(0,t.jsx)("option",{value:"pending",children:"Pending"}),(0,t.jsx)("option",{value:"processing",children:"Processing"}),(0,t.jsx)("option",{value:"shipped",children:"Shipped"}),(0,t.jsx)("option",{value:"delivered",children:"Delivered"}),(0,t.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,t.jsx)("button",{onClick:()=>g(u===e.id?null:e.id),className:"text-blue-600 hover:text-blue-700 font-semibold text-sm md:mt-6",children:u===e.id?"Hide Items":"View Items"})]})]}),u===e.id&&(0,t.jsxs)("div",{className:"bg-gray-50 border-t border-gray-200 p-6",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Order Items"}),(0,t.jsx)("div",{className:"space-y-3",children:e.items.map((e,s)=>(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Quantity: ",e.quantity]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"font-semibold text-gray-900",children:["$",(e.price*e.quantity).toFixed(2)]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["$",e.price.toFixed(2)," each"]})]})]},s))}),e.coupon&&(0,t.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Coupon Applied: ",(0,t.jsx)("span",{className:"font-semibold text-blue-600",children:e.coupon})]})})]})]},e.id))})]})})}e.s(["default",()=>i])}]);