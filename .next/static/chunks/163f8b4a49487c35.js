(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,11870,e=>{"use strict";var s=e.i(43476),t=e.i(94690),r=e.i(18566),a=e.i(71645);function l({children:e,requiredRole:l}){let{user:d,isLoading:n,hasRole:i}=(0,t.useAuth)(),c=(0,r.useRouter)();return((0,a.useEffect)(()=>{if(!n){if(!d)return void c.push("/auth");if(l&&!i(l))return void c.push("/")}},[d,n,l,i,c]),n)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):d?l&&!i(l)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Denied"}),(0,s.jsx)("p",{className:"text-gray-600",children:"You don't have permission to access this page."})]})}):(0,s.jsx)(s.Fragment,{children:e}):null}e.s(["ProtectedRoute",()=>l])},98480,e=>{"use strict";let s="sharporder_db";function t(){let e=localStorage.getItem(s);return e?JSON.parse(e):{orders:{},stores:{},blockedConsumers:[]}}function r(e){localStorage.setItem(s,JSON.stringify(e))}let a={create:e=>{let s=t(),a={...e,id:`order_${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return s.orders[a.id]=a,r(s),a},getById:e=>t().orders[e]||null,getByConsumer:e=>Object.values(t().orders).filter(s=>s.consumerId===e),getByStore:e=>Object.values(t().orders).filter(s=>s.storeId===e),getAll:()=>Object.values(t().orders),update:(e,s)=>{let a=t(),l=a.orders[e];if(!l)throw Error("Order not found");let d={...l,...s,updatedAt:new Date().toISOString()};return a.orders[e]=d,r(a),d},delete:e=>{let s=t();delete s.orders[e],r(s)}},l={create:e=>{let s=t(),a={...e,id:`store_${Date.now()}`,createdAt:new Date().toISOString()};return s.stores[a.id]=a,r(s),a},getById:e=>t().stores[e]||null,getByAdmin:e=>Object.values(t().stores).find(s=>s.adminId===e)||null,getAll:()=>Object.values(t().stores),update:(e,s)=>{let a=t(),l=a.stores[e];if(!l)throw Error("Store not found");let d={...l,...s};return a.stores[e]=d,r(a),d},delete:e=>{let s=t();delete s.stores[e],r(s)}},d={add:e=>{let s=t();s.blockedConsumers.includes(e)||(s.blockedConsumers.push(e),r(s))},remove:e=>{let s=t();s.blockedConsumers=s.blockedConsumers.filter(s=>s!==e),r(s)},isBlocked:e=>t().blockedConsumers.includes(e),getAll:()=>t().blockedConsumers};e.s(["AnalyticsDB",0,{getStoreAnalytics:e=>{let s=a.getByStore(e),t=s.reduce((e,s)=>e+(s.totalPrice-s.discount),0);return{totalOrders:s.length,totalRevenue:t,averageOrderValue:s.length>0?t/s.length:0,recentOrders:s.slice(-10)}},getSystemAnalytics:()=>{let e=a.getAll(),s=l.getAll(),t=d.getAll().length,r=e.reduce((e,s)=>e+(s.totalPrice-s.discount),0),n=new Set(e.map(e=>e.consumerId)).size;return{totalOrders:e.length,totalRevenue:r,averageOrderValue:e.length>0?r/e.length:0,recentOrders:e.slice(-20),totalStores:s.length,totalConsumers:n,totalBlocked:t}}},"BlockedConsumerDB",0,d,"OrderDB",0,a,"StoreDB",0,l])},17923,e=>{"use strict";let s=(0,e.i(75254).default)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);e.s(["BarChart3",()=>s],17923)},63209,e=>{"use strict";let s=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>s],63209)},23945,e=>{"use strict";let s=(0,e.i(75254).default)("store",[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]]);e.s(["Store",()=>s],23945)},3315,e=>{"use strict";var s=e.i(43476),t=e.i(94690),r=e.i(98480),a=e.i(11870),l=e.i(17923);let d=(0,e.i(75254).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var n=e.i(23945),i=e.i(63209),c=e.i(71645);function o(){let{user:e}=(0,t.useAuth)(),[o,x]=(0,c.useState)(null),[m,g]=(0,c.useState)([]),[h,u]=(0,c.useState)(0),[y,b]=(0,c.useState)(!0);return(0,c.useEffect)(()=>{x(r.AnalyticsDB.getSystemAnalytics()),g(r.StoreDB.getAll()),u(r.BlockedConsumerDB.getAll().length),b(!1)},[e]),(0,s.jsx)(a.ProtectedRoute,{requiredRole:"super_admin",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Super Admin Dashboard"}),(0,s.jsx)("p",{className:"text-gray-600 mb-8",children:"System-wide analytics and management"}),y?(0,s.jsx)("div",{className:"text-center py-12",children:"Loading dashboard..."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"Total Stores"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:o?.totalStores||0})]}),(0,s.jsx)(n.Store,{size:40,className:"text-blue-500"})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"Total Consumers"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:o?.totalConsumers||0})]}),(0,s.jsx)(d,{size:40,className:"text-green-500"})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"System Revenue"}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:["$",(o?.totalRevenue||0).toFixed(2)]})]}),(0,s.jsx)(l.BarChart3,{size:40,className:"text-purple-500"})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"Blocked Consumers"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:h})]}),(0,s.jsx)(i.AlertCircle,{size:40,className:"text-red-500"})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,s.jsxs)("a",{href:"/super-admin/admins",className:"bg-blue-50 border border-blue-200 rounded-lg p-4 hover:bg-blue-100 transition",children:[(0,s.jsx)(d,{className:"text-blue-600 mb-2",size:24}),(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:"Manage Admins"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"View and manage admin accounts"})]}),(0,s.jsxs)("a",{href:"/super-admin/consumers",className:"bg-green-50 border border-green-200 rounded-lg p-4 hover:bg-green-100 transition",children:[(0,s.jsx)(i.AlertCircle,{className:"text-green-600 mb-2",size:24}),(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:"Manage Consumers"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Block or unblock consumers"})]}),(0,s.jsxs)("a",{href:"/super-admin/analytics",className:"bg-purple-50 border border-purple-200 rounded-lg p-4 hover:bg-purple-100 transition",children:[(0,s.jsx)(l.BarChart3,{className:"text-purple-600 mb-2",size:24}),(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:"System Analytics"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Platform-wide metrics"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6 mb-8",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Active Stores"}),0===m.length?(0,s.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No stores created yet"}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(e=>(0,s.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,s.jsxs)("span",{children:["Admin: ",e.adminId]}),(0,s.jsx)("span",{className:`px-2 py-1 rounded ${e.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.active?"Active":"Inactive"})]})]},e.id))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"System Status"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"Platform Status"}),(0,s.jsx)("span",{className:"text-green-600 font-semibold",children:"Operational"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"Database"}),(0,s.jsx)("span",{className:"text-green-600 font-semibold",children:"Connected"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"API Services"}),(0,s.jsx)("span",{className:"text-green-600 font-semibold",children:"Running"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"Last Updated"}),(0,s.jsx)("span",{className:"text-gray-600 text-sm",children:new Date().toLocaleString()})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Key Metrics"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"Total Orders"}),(0,s.jsx)("span",{className:"font-semibold text-gray-900",children:o?.totalOrders||0})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"Avg Order Value"}),(0,s.jsxs)("span",{className:"font-semibold text-gray-900",children:["$",(o?.avgOrderValue||0).toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"Conversion Rate"}),(0,s.jsxs)("span",{className:"font-semibold text-gray-900",children:[o?.totalOrders?(o.totalOrders/100*100).toFixed(1):0,"%"]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"Active Admins"}),(0,s.jsx)("span",{className:"font-semibold text-gray-900",children:m.length})]})]})]})]})]})]})})}e.s(["default",()=>o],3315)}]);