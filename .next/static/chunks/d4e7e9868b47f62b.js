(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,11870,e=>{"use strict";var s=e.i(43476),r=e.i(94690),a=e.i(18566),t=e.i(71645);function l({children:e,requiredRole:l}){let{user:n,isLoading:i,hasRole:d}=(0,r.useAuth)(),o=(0,a.useRouter)();return((0,t.useEffect)(()=>{if(!i){if(!n)return void o.push("/auth");if(l&&!d(l))return void o.push("/")}},[n,i,l,d,o]),i)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):n?l&&!d(l)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Denied"}),(0,s.jsx)("p",{className:"text-gray-600",children:"You don't have permission to access this page."})]})}):(0,s.jsx)(s.Fragment,{children:e}):null}e.s(["ProtectedRoute",()=>l])},63488,e=>{"use strict";let s=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>s],63488)},69359,e=>{"use strict";var s=e.i(43476),r=e.i(94690),a=e.i(11870),t=e.i(84614),l=e.i(63488),n=e.i(92270),i=e.i(71645),d=e.i(18566);function o(){let{user:e,logout:o}=(0,r.useAuth)(),c=(0,d.useRouter)(),[m,u]=(0,i.useState)(!1),[x,g]=(0,i.useState)({name:"",email:"",currentPassword:"",newPassword:"",confirmPassword:""}),[b,h]=(0,i.useState)(""),[p,f]=(0,i.useState)(""),y=e=>{let{name:s,value:r}=e.target;g(e=>({...e,[s]:r})),h("")};return(0,i.useEffect)(()=>{e&&g(s=>({...s,name:e.name||"",email:e.email||""}))},[e]),(0,s.jsx)(a.ProtectedRoute,{requiredRole:"consumer",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Your Profile"}),b&&(0,s.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm",children:b}),p&&(0,s.jsx)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg text-green-800 text-sm",children:p}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6 mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Account Information"}),m?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,s.jsx)("input",{type:"text",name:"name",value:x.name,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,s.jsx)("input",{type:"email",name:"email",value:x.email,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>{if(!x.name||!x.email)return void h("Name and email are required");if(!/^\S+@\S+\.\S+$/.test(x.email))return void h("Please enter a valid email address");try{let s=JSON.parse(localStorage.getItem("allUsers")||"[]").map(s=>s.id===e?.id?{...s,name:x.name,email:x.email}:s);localStorage.setItem("allUsers",JSON.stringify(s));let r={...e,name:x.name,email:x.email};localStorage.setItem("user",JSON.stringify(r)),f("Profile updated successfully"),u(!1),setTimeout(()=>f(""),3e3)}catch(e){h("Failed to update profile. Please try again.")}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium text-sm",children:"Save Changes"}),(0,s.jsx)("button",{onClick:()=>{u(!1),g(s=>({...s,name:e?.name||"",email:e?.email||""}))},className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium text-sm",children:"Cancel"})]})]}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)(t.User,{size:20,className:"text-gray-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Name"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:e?.name})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)(l.Mail,{size:20,className:"text-gray-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Email"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:e?.email})]})]}),(0,s.jsx)("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium text-sm",children:"Edit Profile"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6 mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Change Password"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),(0,s.jsx)("input",{type:"password",name:"currentPassword",value:x.currentPassword,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,s.jsx)("input",{type:"password",name:"newPassword",value:x.newPassword,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),(0,s.jsx)("input",{type:"password",name:"confirmPassword",value:x.confirmPassword,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),(0,s.jsx)("button",{onClick:()=>{if(h(""),!x.currentPassword||!x.newPassword||!x.confirmPassword)return void h("All password fields are required");if(x.newPassword!==x.confirmPassword)return void h("New passwords do not match");if(x.newPassword.length<4)return void h("Password must be at least 4 characters");try{let s=JSON.parse(localStorage.getItem("allUsers")||"[]"),r=s.find(s=>s.id===e?.id);if(!r)return void h("User not found");if(r.password!==x.currentPassword)return void h("Current password is incorrect");let a=s.map(s=>s.id===e?.id?{...s,password:x.newPassword}:s);localStorage.setItem("allUsers",JSON.stringify(a)),f("Password changed successfully"),g(e=>({...e,currentPassword:"",newPassword:"",confirmPassword:""})),setTimeout(()=>f(""),3e3)}catch(e){h("Failed to change password. Please try again.")}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium text-sm",children:"Update Password"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Session"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Sign out from your account"}),(0,s.jsxs)("button",{onClick:()=>{o(),c.push("/auth")},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium text-sm flex items-center gap-2",children:[(0,s.jsx)(n.LogOut,{size:16}),"Logout"]})]})]})})}e.s(["default",()=>o])}]);